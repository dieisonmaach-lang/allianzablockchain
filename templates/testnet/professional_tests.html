<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testes Profissionais - Allianza Testnet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Bot√£o Voltar Padronizado */
                .btn-back {
            display: inline-block;
            padding: 8px 16px;
            background: #374151;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 14px;
            transition: background 0.2s;
        }
        
        
        
    
        .btn-back:hover {
            background: #4b5563;
        }
</style>
</head>
<body class="bg-gray-900 text-white">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="mb-8">
            <div class="mb-6">
                <a href="javascript:history.back()" class="btn-back">
Voltar
                </a>
            </div>
            <h1 class="text-4xl font-bold mb-2">üß™ Testes Profissionais</h1>
            <p class="text-gray-400">Suite completa de testes obrigat√≥rios para testnet profissional</p>
        </div>

        <!-- Status -->
        <div id="status" class="mb-6 p-4 bg-gray-800 rounded-lg">
            <p class="text-yellow-400">‚è≥ Carregando testes...</p>
        </div>

        <!-- Se√ß√£o 1: Testes de Camada Qu√¢ntica -->
        <div class="mb-8">
            <h2 class="text-2xl font-bold mb-4">üü¶ 1. Testes de Camada Qu√¢ntica (PQC / QRS-3)</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h3 class="font-semibold mb-2">1.1. Gera√ß√£o de Chaves PQC</h3>
                    <p class="text-sm text-gray-400 mb-3">ML-DSA, ML-KEM, SPHINCS+</p>
                    <button onclick="runTest('1_1_pqc_key_generation')" class="w-full bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded font-bold">
                        Executar
                    </button>
                    <div id="result_1_1_pqc_key_generation" class="mt-2 text-sm hidden"></div>
                </div>
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h3 class="font-semibold mb-2">1.2. Assinatura QRS-3</h3>
                    <p class="text-sm text-gray-400 mb-3">ECDSA + ML-DSA + SPHINCS+</p>
                    <button onclick="runTest('1_2_qrs3_signature')" class="w-full bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded font-bold">
                        Executar
                    </button>
                    <div id="result_1_2_qrs3_signature" class="mt-2 text-sm hidden"></div>
                </div>
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h3 class="font-semibold mb-2">1.3. Auditoria PQC</h3>
                    <p class="text-sm text-gray-400 mb-3">Verifica√ß√£o e valida√ß√£o</p>
                    <button onclick="runTest('1_3_pqc_audit_verification')" class="w-full bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded font-bold">
                        Executar
                    </button>
                    <div id="result_1_3_pqc_audit_verification" class="mt-2 text-sm hidden"></div>
                </div>
            </div>
        </div>

        <!-- Se√ß√£o 2: Testes de Interoperabilidade -->
        <div class="mb-8">
            <h2 class="text-2xl font-bold mb-4">üåê 2. Testes de Interoperabilidade</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h3 class="font-semibold mb-2">2.1. Proof-of-Lock</h3>
                    <p class="text-sm text-gray-400 mb-3">Polygon ‚Üí Bitcoin</p>
                    <button onclick="runTest('2_1_proof_of_lock')" class="w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded font-bold">
                        Executar
                    </button>
                    <div id="result_2_1_proof_of_lock" class="mt-2 text-sm hidden"></div>
                </div>
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h3 class="font-semibold mb-2">2.2. Gasless Interoperability</h3>
                    <p class="text-sm text-gray-400 mb-3">Relay sem gas</p>
                    <button onclick="runTest('2_2_gasless_interoperability')" class="w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded font-bold">
                        Executar
                    </button>
                    <div id="result_2_2_gasless_interoperability" class="mt-2 text-sm hidden"></div>
                </div>
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h3 class="font-semibold mb-2">2.3. Bitcoin ‚Üî EVM</h3>
                    <p class="text-sm text-gray-400 mb-3">Convers√£o real</p>
                    <button onclick="runTest('2_3_bitcoin_evm_conversion')" class="w-full bg-green-600 hover:bg-green-700 px-4 py-2 rounded font-bold">
                        Executar
                    </button>
                    <div id="result_2_3_bitcoin_evm_conversion" class="mt-2 text-sm hidden"></div>
                </div>
            </div>
        </div>

        <!-- Se√ß√£o 4: Testes de Blockchain Core -->
        <div class="mb-8">
            <h2 class="text-2xl font-bold mb-4">‚õìÔ∏è 4. Testes de Blockchain Core</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h3 class="font-semibold mb-2">4.1. Consenso</h3>
                    <p class="text-sm text-gray-400 mb-3">Multi-node consensus</p>
                    <button onclick="runTest('4_1_consensus')" class="w-full bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded font-bold">
                        Executar
                    </button>
                    <div id="result_4_1_consensus" class="mt-2 text-sm hidden"></div>
                </div>
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h3 class="font-semibold mb-2">4.2. Sincroniza√ß√£o de N√≥s</h3>
                    <p class="text-sm text-gray-400 mb-3">Node sync</p>
                    <button onclick="runTest('4_2_node_sync')" class="w-full bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded font-bold">
                        Executar
                    </button>
                    <div id="result_4_2_node_sync" class="mt-2 text-sm hidden"></div>
                </div>
            </div>
        </div>

        <!-- Se√ß√£o 5: Smart Contracts -->
        <div class="mb-8">
            <h2 class="text-2xl font-bold mb-4">üìú 5. Smart Contracts</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h3 class="font-semibold mb-2">5. Smart Contracts</h3>
                    <p class="text-sm text-gray-400 mb-3">ALZ-VM execution</p>
                    <button onclick="runTest('5_smart_contracts')" class="w-full bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded font-bold">
                        Executar
                    </button>
                    <div id="result_5_smart_contracts" class="mt-2 text-sm hidden"></div>
                </div>
            </div>
        </div>

        <!-- Se√ß√£o 8: Testes Opcionais -->
        <div class="mb-8">
            <h2 class="text-2xl font-bold mb-4">üî¨ 8. Testes Opcionais</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h3 class="font-semibold mb-2">8.1. FHE</h3>
                    <p class="text-sm text-gray-400 mb-3">Criptografia Homom√≥rfica</p>
                    <button onclick="runTest('8_1_fhe')" class="w-full bg-pink-600 hover:bg-pink-700 px-4 py-2 rounded font-bold">
                        Executar
                    </button>
                    <div id="result_8_1_fhe" class="mt-2 text-sm hidden"></div>
                </div>
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h3 class="font-semibold mb-2">8.2. QR-DID</h3>
                    <p class="text-sm text-gray-400 mb-3">Identidade Qu√¢ntico-Segura</p>
                    <button onclick="runTest('8_2_qr_did')" class="w-full bg-pink-600 hover:bg-pink-700 px-4 py-2 rounded font-bold">
                        Executar
                    </button>
                    <div id="result_8_2_qr_did" class="mt-2 text-sm hidden"></div>
                </div>
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h3 class="font-semibold mb-2">8.3. Wormhole Prevention</h3>
                    <p class="text-sm text-gray-400 mb-3">Preven√ß√£o de exploits</p>
                    <button onclick="runTest('8_3_wormhole_prevention')" class="w-full bg-pink-600 hover:bg-pink-700 px-4 py-2 rounded font-bold">
                        Executar
                    </button>
                    <div id="result_8_3_wormhole_prevention" class="mt-2 text-sm hidden"></div>
                </div>
            </div>
        </div>

        <!-- Bot√£o Executar Todos -->
        <div class="mb-8">
            <button onclick="runAllTests()" class="w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 px-6 py-4 rounded-lg font-bold text-lg">
                üöÄ Executar Todos os Testes
            </button>
        </div>

        <!-- Resultados Gerais -->
        <div id="allResults" class="hidden bg-gray-800 p-6 rounded-lg mb-6">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-xl font-bold">üìä Resultados Completos</h3>
                <div class="flex gap-2">
                    <button onclick="copyResults()" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-sm font-semibold transition">
                        <i class="fas fa-copy mr-2"></i>Copiar
                    </button>
                    <button onclick="downloadResults()" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded text-sm font-semibold transition">
                        <i class="fas fa-download mr-2"></i>Baixar
                    </button>
                </div>
            </div>
            <pre id="allResultsContent" class="text-sm overflow-auto max-h-96"></pre>
        </div>

    </div>

    <script>
        // Mapeamento de IDs de teste para nomes
        const testNames = {
            '1_1_pqc_key_generation': 'Gera√ß√£o de Chaves PQC',
            '1_2_qrs3_signature': 'Assinatura QRS-3',
            '1_3_pqc_audit_verification': 'Auditoria PQC',
            '2_1_proof_of_lock': 'Proof-of-Lock',
            '2_2_gasless_interoperability': 'Gasless Interoperability',
            '2_3_bitcoin_evm_conversion': 'Bitcoin ‚Üî EVM',
            '4_1_consensus': 'Consenso',
            '4_2_node_sync': 'Sincroniza√ß√£o de N√≥s',
            '5_smart_contracts': 'Smart Contracts',
            '8_1_fhe': 'FHE',
            '8_2_qr_did': 'QR-DID',
            '8_3_wormhole_prevention': 'Wormhole Prevention'
        };

        // Executar teste individual
        async function runTest(testId) {
            const resultDiv = document.getElementById(`result_${testId}`);
            resultDiv.classList.remove('hidden');
            resultDiv.innerHTML = '<p class="text-yellow-400">‚è≥ Executando...</p>';

            try {
                const response = await fetch('/professional-tests/api/run-test', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ test_id: testId })
                });

                const data = await response.json();
                
                if (data.success) {
                    resultDiv.innerHTML = `<p class="text-green-400">‚úÖ Sucesso!</p><pre class="text-xs mt-2">${JSON.stringify(data, null, 2).substring(0, 200)}...</pre>`;
                } else {
                    resultDiv.innerHTML = `<p class="text-red-400">‚ùå Falhou: ${data.error || 'Erro desconhecido'}</p>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<p class="text-red-400">‚ùå Erro: ${error.message}</p>`;
            }
        }

        // Executar todos os testes
        async function runAllTests() {
            const allResultsDiv = document.getElementById('allResults');
            const allResultsContent = document.getElementById('allResultsContent');
            allResultsDiv.classList.remove('hidden');
            allResultsContent.textContent = '‚è≥ Executando todos os testes...\n\nIsso pode levar alguns minutos...';

            try {
                const response = await fetch('/professional-tests/api/run-all', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'}
                });

                const data = await response.json();
                allResultsContent.textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                allResultsContent.textContent = `Erro: ${error.message}`;
            }
        }

        // Fun√ß√µes para copiar e baixar resultados
        function copyResults() {
            const content = document.getElementById('allResultsContent').textContent;
            navigator.clipboard.writeText(content).then(() => {
                alert('‚úÖ Resultados copiados para a √°rea de transfer√™ncia!');
            }).catch(err => {
                console.error('Erro ao copiar:', err);
                alert('‚ùå Erro ao copiar. Tente selecionar e copiar manualmente.');
            });
        }

        function downloadResults() {
            const content = document.getElementById('allResultsContent').textContent;
            const blob = new Blob([content], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `prova_testes_profissionais_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Verificar status ao carregar
        document.addEventListener('DOMContentLoaded', function() {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = '<p class="text-green-400">‚úÖ Testes Profissionais dispon√≠veis</p>';
        });
    </script>
</body>
</html>

